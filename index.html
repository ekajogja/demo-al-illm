<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AL ILLM - AI Chatbot Keilmuan Islam</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined">
    <style>
        :root {
            --md-primary-color: #1976D2;
            --md-primary-variant-color: #004ba0;
            --md-secondary-color: #673AB7;
            --md-background-color: #f5f5f5;
            --md-surface-color: #FFFFFF;
            --md-sidebar-color: #ECEFF1; /* Blue Grey 50 */
            --md-history-bg-color: #FFFFFF;
            --md-on-primary-color: #FFFFFF;
            --md-text-primary: rgba(0, 0, 0, 0.87);
            --md-text-secondary: rgba(0, 0, 0, 0.60);
            --md-text-disabled: rgba(0, 0, 0, 0.38);
            --sahih-bg: #E8F5E9;
            --sahih-text: #2E7D32;
            --generated-bg: #FFF3E0;
            --generated-text: #E65100;
            --elevation-1: 0 2px 1px -1px rgba(0,0,0,0.2), 0 1px 1px 0 rgba(0,0,0,0.14), 0 1px 3px 0 rgba(0,0,0,0.12);
            --elevation-2: 0 3px 1px -2px rgba(0,0,0,0.2), 0 2px 2px 0 rgba(0,0,0,0.14), 0 1px 5px 0 rgba(0,0,0,0.12);
            --sidebar-width: 280px;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--md-background-color);
            margin: 0;
            height: 100vh;
            display: flex;
            overflow: hidden;
        }

        .app-layout {
            display: flex;
            width: 100%;
            height: 100%;
            position: relative;
        }

        .sidebar, .sidebar-right {
            width: var(--sidebar-width);
            background-color: var(--md-sidebar-color);
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
            position: fixed;
            top: 0;
            height: 100%;
            z-index: 100;
            transition: transform 0.3s ease;
        }
        .sidebar {
            left: 0;
            transform: translateX(0);
        }
        .sidebar-right {
            right: 0;
            transform: translateX(0);
        }

        .sidebar.collapsed { transform: translateX(calc(-1 * var(--sidebar-width))); }
        .sidebar-right.collapsed { transform: translateX(var(--sidebar-width)); }
        
        .sidebar .sidebar-content, .sidebar-right .sidebar-content { 
            display: flex; 
            flex-direction: column; 
            height: 100%; 
            padding: 16px; 
        }
        .sidebar.collapsed .sidebar-content, .sidebar-right.collapsed .sidebar-content { 
            opacity: 0; 
            pointer-events: none; 
            transition: opacity 0.2s ease; 
        }

        .profile-section { padding-bottom: 16px; border-bottom: 1px solid #e0e0e0; margin-bottom: 16px; }
        .profile-card { display: flex; align-items: center; gap: 12px; }
        .profile-card .avatar { width: 48px; height: 48px; border-radius: 50%; background-color: var(--md-secondary-color); color: var(--md-on-primary-color); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; }
        .profile-card .user-info h5 { margin: 0 0 4px 0; font-size: 1rem; font-weight: 500; }
        .profile-card .user-info .user-class {
            font-size: 0.8rem;
            font-weight: 500;
            padding: 3px 8px;
            border-radius: 6px;
            background-color: var(--md-primary-color);
            color: var(--md-on-primary-color);
            display: inline-block;
        }
        .credits { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            font-size: 0.875rem; 
            color: var(--md-text-secondary); 
            margin-top: 16px; 
        }
        .top-up-btn {
            font-size: 0.8rem;
            font-weight: 500;
            color: var(--md-primary-color);
            background-color: transparent;
            border: 1px solid var(--md-primary-color);
            border-radius: 12px;
            padding: 4px 10px;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
        }
        .top-up-btn:hover {
            background-color: var(--md-primary-color);
            color: var(--md-on-primary-color);
        }
        
        .new-chat-button-container { padding: 16px 0; }
        .new-chat-btn {
            display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; padding: 12px; font-size: 0.95rem; font-weight: 500; color: var(--md-on-primary-color); background-color: var(--md-primary-color); border: none; border-radius: 8px; cursor: pointer; transition: background-color 0.3s, box-shadow 0.3s;
        }
        .new-chat-btn:hover { background-color: var(--md-primary-variant-color); box-shadow: var(--elevation-2); }

        .main-menu { flex-grow: 1; overflow-y: auto; }
        .nav-list { list-style: none; padding: 0; margin: 0; }
        .nav-list a { display: flex; align-items: center; gap: 16px; padding: 12px; border-radius: 8px; text-decoration: none; color: var(--md-text-primary); font-weight: 500; font-size: 0.95rem; transition: background-color 0.3s; }
        .nav-list a:hover, .nav-list a.active { background-color: rgba(25, 118, 210, 0.1); color: var(--md-primary-color); }
        .nav-list .material-icons, .nav-list .material-icons-outlined { color: var(--md-text-secondary); }
        .nav-list a:hover .material-icons, .nav-list a:hover .material-icons-outlined, .nav-list a.active .material-icons, .nav-list a.active .material-icons-outlined { color: var(--md-primary-color); }
        
        .chat-history {
            flex-grow: 1;
            overflow-y: auto;
        }
        .history-title { font-size: 0.875rem; font-weight: 500; color: var(--md-text-secondary); padding: 0 12px 8px 12px; }
        .chat-history .nav-list { max-height: none; }

        .main-content {
            flex-grow: 1; 
            display: flex; 
            flex-direction: column; 
            height: 100vh; 
            margin-left: 0;
            margin-right: 0;
            width: 100%; 
            transition: margin-left 0.3s ease, margin-right 0.3s ease, width 0.3s ease, transform 0.3s ease;
        }

        .chat-header {
            background-color: var(--md-surface-color); 
            padding: 8px 16px; 
            border-bottom: 1px solid #e0e0e0; 
            z-index: 10; 
            display: flex; 
            align-items: center; 
            justify-content: space-between; 
            gap: 16px; 
            flex-shrink: 0;
        }
        .menu-toggle { 
            background: none; 
            border: none; 
            cursor: pointer; 
            width: 40px; 
            height: 40px; 
            border-radius: 50%; 
            display: flex; 
            align-items: center; 
            justify-content: center;
        }
        .menu-toggle:hover { background-color: rgba(0,0,0,0.05); }
        .menu-toggle .material-icons { font-size: 24px; color: var(--md-text-secondary); }
        .chat-header .header-logo { height: 44px; width: auto; position: absolute; left: 50%; transform: translateX(-50%); }

        .chat-container { width: 100%; height: 100%; background-color: var(--md-surface-color); display: flex; flex-direction: column; overflow: hidden; }
        .chat-messages { flex-grow: 1; padding: 24px; overflow-y: auto; background-color: var(--md-background-color); }
        .message-wrapper { display: flex; justify-content: center; }
        .message-container { width: 100%; max-width: 900px; }
        .message { display: flex; gap: 16px; max-width: 85%; margin-bottom: 16px; }
        .message.user-message { margin-left: auto; flex-direction: row-reverse; }
        .message .avatar { width: 40px; height: 40px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-weight: 500; flex-shrink: 0; }
        .user-message .avatar { background-color: var(--md-secondary-color); color: var(--md-on-primary-color); }
        .bot-message .avatar { background-color: var(--md-surface-color); border: 1px solid #e0e0e0;}
        .bot-message .avatar img { width: 38px; height: 38px; object-fit: contain; }
        .message-content { border-radius: 16px; padding: 16px 20px; font-size: 1rem; line-height: 1.6; color: var(--md-text-primary); }
        .user-message .message-content { background-color: var(--md-secondary-color); color: var(--md-on-primary-color); border-radius: 16px 16px 4px 16px; }
        .bot-message .message-content { background-color: var(--md-surface-color); box-shadow: var(--elevation-1); border-radius: 16px 16px 16px 4px; }
        .response-card { padding: 12px; border-radius: 8px; margin-top: 8px; }
        .response-card.sahih { background-color: var(--sahih-bg); }
        .response-card.generated { background-color: var(--generated-bg); }
        .status-badge { display: flex; align-items: center; gap: 8px; font-weight: 500; font-size: 1rem; margin-bottom: 8px; }
        .status-badge .material-icons { font-size: 22px; }
        .status-badge.sahih { color: var(--sahih-text); }
        .status-badge.generated { color: var(--generated-text); }
        .metadata { font-size: 0.875rem; color: var(--md-text-secondary); border-left: 3px solid var(--sahih-text); padding-left: 12px; margin-top: 12px; }
        .disclaimer { font-size: 0.875rem; color: var(--generated-text); margin-top: 12px; }
        .source-section { margin-top: 16px; padding-top: 12px; border-top: 1px solid #e0e0e0; }
        .source-section h6 { display: flex; align-items: center; gap: 8px; font-weight: 500; font-size: 0.9rem; color: var(--md-text-secondary); margin: 0 0 10px 0; }
        .source-section .chip-container { display: flex; gap: 8px; flex-wrap: wrap; }
        .source-chip { display: inline-flex; align-items: center; gap: 6px; text-decoration: none; font-size: 0.85rem; font-weight: 400; padding: 6px 12px; border-radius: 16px; background-color: #e0e0e0; color: var(--md-text-primary); transition: background-color 0.3s, box-shadow 0.3s; }
        .source-chip:hover { background-color: #d5d5d5; box-shadow: var(--elevation-1); }
        .source-chip .material-icons { font-size: 18px; }
        .research-suggestions { margin-top: 20px; border-top: 1px solid #e0e0e0; padding-top: 16px; }
        .research-suggestions h6 { display: flex; align-items: center; gap: 8px; font-weight: 500; font-size: 1rem; color: var(--md-text-primary); margin: 0 0 12px 0; }
        .research-suggestions ul { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 8px; }
        .research-suggestions li { display: flex; justify-content: space-between; align-items: center; }
        .research-suggestions a { text-decoration: none; color: var(--md-primary-color); font-size: 0.95rem; padding: 10px; border-radius: 8px; transition: background-color 0.3s; flex-grow: 1; }
        .research-suggestions a:hover { background-color: rgba(25, 118, 210, 0.08); }
        .research-suggestions .answered-tag { display: flex; align-items: center; gap: 4px; font-size: 0.8rem; font-weight: 500; color: var(--sahih-text); background-color: var(--sahih-bg); padding: 4px 8px; border-radius: 12px; }
        .research-suggestions .answered-tag .material-icons { font-size: 16px; }
        .research-suggestions a.answered { color: var(--md-text-disabled); pointer-events: none; }
        .chat-input-area-wrapper { padding: 12px 24px; border-top: 1px solid #e0e0e0; background-color: var(--md-surface-color); flex-shrink: 0; }
        .chat-input-area { max-width: 900px; margin: 0 auto; }
        .chat-input { display: flex; align-items: center; background-color: var(--md-background-color); border-radius: 28px; padding: 6px; }
        .chat-input input { flex-grow: 1; border: none; background: transparent; padding: 14px 20px; font-size: 1.05rem; color: var(--md-text-primary); }
        .chat-input input:focus { outline: none; }
        .chat-input button { border: none; background-color: var(--md-primary-color); color: var(--md-on-primary-color); width: 48px; height: 48px; border-radius: 50%; cursor: pointer; display: flex; justify-content: center; align-items: center; box-shadow: var(--elevation-1); transition: background-color 0.3s, box-shadow 0.3s; }
        .chat-input button:hover { box-shadow: var(--elevation-2); background-color: var(--md-primary-variant-color); }

        /* Tooltip Styles */
        [data-tooltip] {
            position: relative;
            cursor: pointer;
        }
        [data-tooltip]::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            margin-bottom: 8px;
            background-color: #323232;
            color: #fff;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 0.875rem;
            line-height: 1.4;
            white-space: nowrap;
            z-index: 200;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s ease, bottom 0.2s ease;
        }
        [data-tooltip]:hover::after {
            opacity: 1;
            bottom: calc(100% + 4px);
        }
        
        /* Left Sidebar Tooltip */
        .sidebar .nav-list a[data-tooltip]::after, .sidebar .new-chat-btn[data-tooltip]::after {
            bottom: auto;
            top: 50%;
            left: 100%;
            transform: translateY(-50%);
            margin-left: 12px;
            margin-bottom: 0;
            transition-delay: 0.3s;
        }
        .sidebar .nav-list a[data-tooltip]:hover::after, .sidebar .new-chat-btn[data-tooltip]:hover::after {
            left: calc(100% + 8px);
        }

        /* Right Sidebar Tooltip */
        .sidebar-right .nav-list a[data-tooltip]::after {
            bottom: auto;
            top: 50%;
            right: 100%;
            left: auto;
            transform: translateY(-50%);
            margin-right: 12px;
            margin-bottom: 0;
            transition-delay: 0.3s;
        }
        .sidebar-right .nav-list a[data-tooltip]:hover::after {
            right: calc(100% + 8px);
            left: auto;
            bottom: auto; /* Override base style */
            top: 50%;
            transform: translateY(-50%); /* Ensure transform is consistent */
        }

    /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        .modal-overlay.visible {
            opacity: 1;
            pointer-events: auto;
        }
        .modal-container {
            background-color: var(--md-surface-color);
            border-radius: 12px;
            box-shadow: var(--elevation-2);
            width: 90%;
            max-width: 800px;
            max-height: 85vh;
            display: flex;
            flex-direction: column;
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }
        .modal-overlay.visible .modal-container {
            transform: scale(1);
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            border-bottom: 1px solid #e0e0e0;
            flex-shrink: 0;
        }
        .modal-header h4 {
            margin: 0;
            font-size: 1.25rem;
            font-weight: 500;
            color: var(--md-text-primary);
        }
        .modal-close-btn {
            background: none;
            border: none;
            cursor: pointer;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-close-btn:hover {
            background-color: rgba(0,0,0,0.05);
        }
        .modal-content {
            padding: 24px;
            overflow-y: auto;
            line-height: 1.7;
            color: var(--md-text-secondary);
        }
        .modal-content h5 {
            font-size: 1.1rem;
            font-weight: 500;
            color: var(--md-text-primary);
            margin-top: 1.5em;
            margin-bottom: 0.5em;
        }
         .modal-content p {
            margin-bottom: 1em;
        }
        .modal-content strong {
            color: var(--md-text-primary);
        }

    </style>
</head>
<body>

    <div class="app-layout" id="app-layout">
        <aside class="sidebar" id="sidebar-left">
            <div class="sidebar-content">
                <div class="profile-section">
                    <div class="profile-card">
                        <div class="avatar">T</div>
                        <div class="user-info">
                            <h5>Tsalitsa</h5>
                            <span class="user-class">Santri & Pelajar</span>
                        </div>
                    </div>
                    <div class="credits">
                        <span>Kredit: <strong>1,200</strong></span>
                        <button class="top-up-btn">Top Up</button>
                    </div>
                </div>

                <div class="new-chat-button-container">
                    <button class="new-chat-btn" data-tooltip="Mulai percakapan baru"><span class="material-icons-outlined">add_comment</span><span>Chat Baru</span></button>
                </div>

                <div class="chat-history">
                    <h6 class="history-title">Riwayat Chat</h6>
                    <ul class="nav-list">
                        <li><a href="#" data-tooltip="Lanjutkan percakapan tentang 'Hari Santri'"><span class="material-icons">history</span><span>Hari Santri</span></a></li>
                        <li><a href="#" data-tooltip="Lanjutkan percakapan tentang 'Hukum Transaksi CoD'"><span class="material-icons">history</span><span>Hukum Transaksi CoD</span></a></li>
                        <li><a href="#" data-tooltip="Lanjutkan percakapan tentang 'Fikih Pertambangan Modern'"><span class="material-icons">history</span><span>Fikih Pertambangan Modern</span></a></li>
                        <li><a href="#" data-tooltip="Lanjutkan percakapan tentang 'Kitab Nasab Rasulullah'"><span class="material-icons">history</span><span>Kitab Nasab Rasulullah</span></a></li>
                        <li><a href="#" data-tooltip="Lanjutkan percakapan tentang 'Karya Kiai Sholeh Darat'"><span class="material-icons">history</span><span>Karya Kiai Sholeh Darat</span></a></li>
                        <li><a href="#" data-tooltip="Lanjutkan percakapan tentang 'Biografi Imam Syafi'i'"><span class="material-icons">history</span><span>Biografi Imam Syafi'i</span></a></li>
                        <li><a href="#" data-tooltip="Lanjutkan percakapan tentang 'Konteks sosial Baghdad'"><span class="material-icons">history</span><span>Konteks sosial Baghdad</span></a></li>
                        <li><a href="#" data-tooltip="Lanjutkan percakapan tentang 'Sejarah Islam di Nusantara'"><span class="material-icons">history</span><span>Sejarah Islam di Nusantara</span></a></li>
                        <li><a href="#" data-tooltip="Lanjutkan percakapan tentang 'Konsep Ahlussunnah wal Jama'ah'"><span class="material-icons">history</span><span>Konsep Aswaja</span></a></li>
                    </ul>
                </div>
            </div>
        </aside>

        <main class="main-content" id="main-content">
            <div class="chat-container">
                <header class="chat-header">
                    <button class="menu-toggle" id="menu-toggle-left" data-tooltip="Buka/Tutup Sidebar Kiri">
                        <span class="material-icons">menu</span>
                    </button>
                    <img src="logo-al-illm.webp" alt="AL ILLM Logo" class="header-logo">
                    <button class="menu-toggle" id="menu-toggle-right" data-tooltip="Buka/Tutup Menu Laman">
                        <span class="material-icons">menu_open</span>
                    </button>
                </header>

                <main class="chat-messages">
                    <!-- PERTANYAAN 1 -->
                    <div class="message-wrapper">
                        <div class="message-container">
                            <div class="message user-message">
                                <div class="avatar">T</div>
                                <div class="message-content">
                                    Apa itu hari santri?
                                </div>
                            </div>
                            <div class="message bot-message">
                                <div class="avatar"><img src="simbol-al-illm.webp" alt="Bot Avatar"></div>
                                <div class="message-content">
                                    <div class="response-card sahih">
                                        <div class="status-badge sahih">
                                            <span class="material-icons">verified</span> Jawaban Sahih
                                        </div>
                                        <p>Hari Santri adalah hari peringatan nasional di Indonesia yang ditetapkan pada tanggal 22 Oktober setiap tahunnya. Peringatan ini didasarkan pada Keputusan Presiden Nomor 22 Tahun 2015.</p>
                                        <p>Tanggal 22 Oktober dipilih untuk mengenang seruan <strong>Resolusi Jihad</strong> yang dicetuskan oleh Hadratussyaikh KH Hasyim Asy'ari pada 22 Oktober 1945. Seruan ini mewajibkan setiap Muslim untuk berperang melawan pasukan Sekutu (NICA) yang ingin kembali menjajah Indonesia, yang kemudian memicu peristiwa heroik Pertempuran Surabaya pada 10 November 1945.</p>
                                        <div class="metadata">
                                            <strong>Kontributor Q&A:</strong> Tim Sejarah PBNU<br>
                                            <strong>Mushahih:</strong> Prof. Dr. Azyumardi Azra
                                        </div>
                                    </div>
                                    <div class="source-section">
                                        <h6><span class="material-icons-outlined">hub</span> Entitas Knowledge Graph</h6>
                                        <div class="chip-container">
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Hari Santri' dalam Knowledge Graph">Hari Santri</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Resolusi Jihad' dalam Knowledge Graph">Resolusi Jihad</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'KH Hasyim Asy'ari' dalam Knowledge Graph">KH Hasyim Asy'ari</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Nahdlatul Ulama' dalam Knowledge Graph">Nahdlatul Ulama</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Pertempuran Surabaya' dalam Knowledge Graph">Pertempuran Surabaya</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'NICA' dalam Knowledge Graph">NICA</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Pasukan Sekutu' dalam Knowledge Graph">Pasukan Sekutu</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas '10 November 1945' dalam Knowledge Graph">10 November 1945</a>
                                        </div>
                                    </div>
                                    <div class="source-section">
                                        <h6><span class="material-icons-outlined">article</span> Dokumen Teranotasi</h6>
                                        <div class="chip-container">
                                            <a href="#" class="source-chip" data-tooltip="Buka dokumen Keppres No. 22 Tahun 2015">Keppres No. 22 Tahun 2015</a>
                                            <a href="#" class="source-chip" data-tooltip="Buka dokumen Naskah Asli Resolusi Jihad 1945">Naskah Asli Resolusi Jihad 1945</a>
                                        </div>
                                    </div>
                                    <div class="research-suggestions">
                                        <h6><span class="material-icons-outlined">explore</span> Riset Lanjutan</h6>
                                        <ul>
                                            <li>
                                                <a href="#" class="answered">Mengapa ada resolusi jihad?</a>
                                                <span class="answered-tag"><span class="material-icons">check_circle</span> Terjawab</span>
                                            </li>
                                            <li><a href="#">Siapa saja tokoh ulama yang menandatangani Resolusi Jihad?</a></li>
                                            <li><a href="#">Apa isi lengkap dari Keputusan Presiden No. 22 Tahun 2015?</a></li>
                                            <li><a href="#">Bagaimana peranan santri dalam Pertempuran Surabaya?</a></li>
                                            <li><a href="#">Selain NU, ormas apa lagi yang terlibat dalam perjuangan kemerdekaan?</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- PERTANYAAN 2 -->
                    <div class="message-wrapper">
                        <div class="message-container">
                            <div class="message user-message">
                                <div class="avatar">T</div>
                                <div class="message-content">
                                    Mengapa ada resolusi jihad?
                                </div>
                            </div>
                            <div class="message bot-message">
                                <div class="avatar"><img src="simbol-al-illm.webp" alt="Bot Avatar"></div>
                                <div class="message-content">
                                    <div class="response-card sahih">
                                        <div class="status-badge sahih">
                                            <span class="material-icons">verified</span> Jawaban Sahih
                                        </div>
                                        <p>Resolusi Jihad lahir sebagai respons langsung terhadap situasi genting pasca-Proklamasi Kemerdekaan Indonesia. Pada September-Oktober 1945, pasukan NICA (Netherlands Indies Civil Administration) yang membonceng pasukan Sekutu mulai mendarat di kota-kota besar, termasuk Surabaya, dengan niat untuk mengembalikan kekuasaan kolonial Belanda.</p>
                                        <p>Melihat ancaman ini, para ulama Nahdlatul Ulama di bawah pimpinan <strong>KH Hasyim Asy'ari</strong> dan <strong>KH Wahab Chasbullah</strong> berkumpul dan mengeluarkan fatwa pada 22 Oktober 1945. Fatwa ini menyatakan bahwa hukum membela tanah air dan kemerdekaan adalah <strong>fardhu 'ain</strong> (kewajiban individu) bagi setiap Muslim yang berada dalam radius 94 kilometer dari pusat pertempuran. Resolusi ini secara efektif mengubah perjuangan fisik menjadi perang suci, membakar semangat para santri dan rakyat untuk melawan penjajah.</p>
                                        <div class="metadata">
                                            <strong>Kontributor Q&A:</strong> Pusat Studi Pesantren<br>
                                            <strong>Mushahih:</strong> Dr. Tiar Anwar Bachtiar
                                        </div>
                                    </div>
                                    <div class="source-section">
                                        <h6><span class="material-icons-outlined">hub</span> Entitas Knowledge Graph</h6>
                                        <div class="chip-container">
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Resolusi Jihad' dalam Knowledge Graph">Resolusi Jihad</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'NICA' dalam Knowledge Graph">NICA</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'KH Wahab Chasbullah' dalam Knowledge Graph">KH Wahab Chasbullah</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Fardhu 'Ain' dalam Knowledge Graph">Fardhu 'Ain</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'KH Hasyim Asy'ari' dalam Knowledge Graph">KH Hasyim Asy'ari</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Proklamasi Kemerdekaan' dalam Knowledge Graph">Proklamasi Kemerdekaan</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Pasukan Sekutu' dalam Knowledge Graph">Pasukan Sekutu</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Surabaya' dalam Knowledge Graph">Surabaya</a>
                                        </div>
                                    </div>
                                    <div class="source-section">
                                        <h6><span class="material-icons-outlined">article</span> Dokumen Teranotasi</h6>
                                        <div class="chip-container">
                                            <a href="#" class="source-chip" data-tooltip="Buka dokumen Buku 'Benteng Ulama' oleh Choirul Anam">Buku 'Benteng Ulama' (Choirul Anam)</a>
                                            <a href="#" class="source-chip" data-tooltip="Buka dokumen Majalah 'Berita Nahdlatoel Oelama', Oktober 1945">Majalah 'Berita Nahdlatoel Oelama', 1945</a>
                                        </div>
                                    </div>
                                    <div class="research-suggestions">
                                        <h6><span class="material-icons-outlined">explore</span> Riset Lanjutan</h6>
                                        <ul>
                                            <li>
                                                <a href="#" class="answered">Bagaimana hukum jihad dalam konteks resolusi jihad?</a>
                                                <span class="answered-tag"><span class="material-icons">check_circle</span> Terjawab</span>
                                            </li>
                                            <li><a href="#">Apa perbedaan antara fardhu 'ain dan fardhu kifayah dalam fiqh?</a></li>
                                            <li><a href="#">Bagaimana kronologi kedatangan pasukan NICA di Surabaya?</a></li>
                                            <li><a href="#">Siapa sosok Bung Tomo dan bagaimana ia menyiarkan Resolusi Jihad?</a></li>
                                            <li><a href="#">Di mana markas para ulama saat merumuskan Resolusi Jihad?</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- PERTANYAAN 3 -->
                    <div class="message-wrapper">
                        <div class="message-container">
                            <div class="message user-message">
                                <div class="avatar">T</div>
                                <div class="message-content">
                                    Bagaimana hukum jihad dalam konteks resolusi jihad?
                                </div>
                            </div>
                            <div class="message bot-message">
                                <div class="avatar"><img src="simbol-al-illm.webp" alt="Bot Avatar"></div>
                                <div class="message-content">
                                    <div class="response-card generated">
                                        <div class="status-badge generated">
                                            <span class="material-icons">model_training</span> Jawaban Belum Ditashih
                                        </div>
                                        <p>Dalam konteks Resolusi Jihad, hukum jihad yang berlaku adalah <strong>jihad difa'i</strong> (jihad defensif), yaitu perang untuk mempertahankan diri, kehormatan, harta, dan negara dari agresi musuh. Ini berbeda dari jihad ibtida'i (jihad ofensif) yang bersifat memulai pertempuran.</p>
                                        <p>Fatwa tersebut menetapkan perjuangan ini sebagai <strong>fardhu 'ain</strong>, sebuah kewajiban personal yang mengikat setiap individu Muslim yang mampu dalam jarak tertentu, bukan lagi fardhu kifayah (kewajiban kolektif). Penetapan hukum ini memiliki implikasi sangat kuat, karena mengangkat perjuangan kemerdekaan menjadi sebuah kewajiban agama setingkat shalat lima waktu, sehingga tidak ada tawar-menawar untuk tidak berpartisipasi. Hal ini sesuai dengan kaidah fiqh untuk melindungi tujuan syariat <em>(maqashid syariah)</em>.</p>
                                        <div class="disclaimer">
                                            Jawaban ini digenerasi oleh model AI dan belum melalui proses tashih.
                                        </div>
                                    </div>
                                    <div class="source-section">
                                        <h6><span class="material-icons-outlined">hub</span> Entitas Knowledge Graph</h6>
                                        <div class="chip-container">
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Jihad Difa'i' dalam Knowledge Graph">Jihad Difa'i</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Fardhu 'Ain' dalam Knowledge Graph">Fardhu 'Ain</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Maqashid Syariah' dalam Knowledge Graph">Maqashid Syariah</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Fatwa' dalam Knowledge Graph">Fatwa</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Jihad Ibtida'i' dalam Knowledge Graph">Jihad Ibtida'i</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Fardhu Kifayah' dalam Knowledge Graph">Fardhu Kifayah</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Fiqh' dalam Knowledge Graph">Fiqh</a>
                                        </div>
                                    </div>
                                    <div class="source-section">
                                        <h6><span class="material-icons-outlined">article</span> Dokumen Teranotasi</h6>
                                        <div class="chip-container">
                                            <a href="#" class="source-chip" data-tooltip="Buka dokumen Kitab Fath al-Mu'in (Bab Jihad)">Kitab Fath al-Mu'in (Bab Jihad)</a>
                                            <a href="#" class="source-chip" data-tooltip="Buka dokumen Naskah Asli Resolusi Jihad 1945">Naskah Asli Resolusi Jihad 1945</a>
                                        </div>
                                    </div>
                                    <div class="research-suggestions">
                                        <h6><span class="material-icons-outlined">explore</span> Riset Lanjutan</h6>
                                        <ul>
                                            <li>
                                                <a href="#" class="answered">Bagaimana pandangan hadlratussyaikh mengenai negara islam dan negara pancasila?</a>
                                                <span class="answered-tag"><span class="material-icons">check_circle</span> Terjawab</span>
                                            </li>
                                            <li><a href="#">Apa saja syarat-syarat sahnya jihad difa'i menurut para fuqaha?</a></li>
                                            <li><a href="#">Bagaimana konsep 'hubbul wathon minal iman' (cinta tanah air bagian dari iman)?</a></li>
                                            <li><a href="#">Apakah ada perbedaan pendapat ulama saat itu mengenai Resolusi Jihad?</a></li>
                                            <li><a href="#">Jelaskan perbedaan mendasar antara jihad difa'i dan jihad ibtida'i.</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- PERTANYAAN 4 -->
                    <div class="message-wrapper">
                        <div class="message-container">
                            <div class="message user-message">
                                <div class="avatar">T</div>
                                <div class="message-content">
                                    Bagaimana pandangan hadlratussyaikh mengenai negara islam dan negara pancasila?
                                </div>
                            </div>
                            <div class="message bot-message">
                                <div class="avatar"><img src="simbol-al-illm.webp" alt="Bot Avatar"></div>
                                <div class="message-content">
                                    <div class="response-card sahih">
                                        <div class="status-badge sahih">
                                            <span class="material-icons">verified</span> Jawaban Sahih
                                        </div>
                                        <p>Hadratussyaikh KH Hasyim Asy'ari memandang bahwa tidak ada pertentangan antara Islam dan konsep <strong>Negara Kebangsaan (nation-state)</strong> yang berdasarkan Pancasila. Bagi beliau, tujuan utama syariat <em>(maqashid syariah)</em> adalah untuk mewujudkan kemaslahatan umat, yang mencakup perlindungan terhadap agama, jiwa, akal, keturunan, dan harta.</p>
                                        <p>Beliau berpendapat bahwa bentuk negara tidak diatur secara kaku dalam Islam. Oleh karena itu, Indonesia sebagai negara-bangsa yang berlandaskan Pancasila dianggap sah dan final <em>(dar al-mītsāq)</em>, selama negara tersebut dapat menjamin terwujudnya nilai-nilai dan tujuan syariat tersebut. Pandangan ini menjadi dasar bagi Nahdlatul Ulama untuk menerima Pancasila dan menolak gagasan negara Islam formal di Indonesia, karena substansi keislaman dapat diwujudkan dalam kerangka <strong>Ukhuwah Wathaniyah</strong> (persaudaraan kebangsaan).</p>
                                        <div class="metadata">
                                            <strong>Kontributor Q&A:</strong> Lakpesdam NU<br>
                                            <strong>Mushahih:</strong> Dr. Yudi Latif, M.A.
                                        </div>
                                    </div>
                                    <div class="source-section">
                                        <h6><span class="material-icons-outlined">hub</span> Entitas Knowledge Graph</h6>
                                        <div class="chip-container">
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'KH Hasyim Asy'ari' dalam Knowledge Graph">KH Hasyim Asy'ari</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Pancasila' dalam Knowledge Graph">Pancasila</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Negara Kebangsaan' dalam Knowledge Graph">Negara Kebangsaan</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Ukhuwah Wathaniyah' dalam Knowledge Graph">Ukhuwah Wathaniyah</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Maqashid Syariah' dalam Knowledge Graph">Maqashid Syariah</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Dar al-Mītsāq' dalam Knowledge Graph">Dar al-Mītsāq</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'Nahdlatul Ulama' dalam Knowledge Graph">Nahdlatul Ulama</a>
                                            <a href="#" class="source-chip" data-tooltip="Lihat entitas 'NKRI' dalam Knowledge Graph">NKRI</a>
                                        </div>
                                    </div>
                                    <div class="source-section">
                                        <h6><span class="material-icons-outlined">article</span> Dokumen Teranotasi</h6>
                                        <div class="chip-container">
                                            <a href="#" class="source-chip" data-tooltip="Buka dokumen Qanun Asasi Nahdlatul Ulama">Qanun Asasi Nahdlatul Ulama</a>
                                            <a href="#" class="source-chip" data-tooltip="Buka dokumen Buku 'Negara Paripurna' oleh Yudi Latif">Buku 'Negara Paripurna' (Yudi Latif)</a>
                                        </div>
                                    </div>
                                    <div class="research-suggestions">
                                        <h6><span class="material-icons-outlined">explore</span> Riset Lanjutan</h6>
                                        <ul>
                                            <li><a href="#">Apa lima prinsip dasar (Maqashid Syariah) yang dilindungi Islam?</a></li>
                                            <li><a href="#">Bagaimana proses penerimaan Pancasila sebagai asas tunggal oleh NU?</a></li>
                                            <li><a href="#">Siapa saja tokoh pendiri bangsa yang ikut merumuskan Pancasila?</a></li>
                                            <li><a href="#">Jelaskan konsep 'ukhuwah basyariyah' dan 'ukhuwah wathaniyah'.</a></li>
                                            <li><a href="#">Bagaimana relevansi pandangan KH Hasyim Asy'ari di era modern?</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>

                <footer class="chat-input-area-wrapper">
                    <div class="chat-input-area">
                        <div class="chat-input">
                            <input type="text" placeholder="Tanyakan sesuatu...">
                            <button data-tooltip="Kirim Pesan">
                                <span class="material-icons">send</span>
                            </button>
                        </div>
                    </div>
                </footer>
            </div>
        </main>

        <aside class="sidebar-right" id="sidebar-right">
            <div class="sidebar-content">
                <nav class="main-menu">
                    <ul class="nav-list">
                        <li><a href="#" class="active" data-tooltip="Masuk ke antarmuka utama chatbot"><span class="material-icons">question_answer</span><span>Chatbot AL 'ILLM</span></a></li>
                        <li><a href="#" data-tooltip="Pelajari latar belakang dan tujuan proyek" data-section="Membangun Kecerdasan Buatan yang Berkah: Narasi di Balik AL 'ILLM"><span class="material-icons-outlined">description</span><span>Narasi & Visi Proyek</span></a></li>
                        <li><a href="#" data-tooltip="Pahami proses kurasi dan anotasi naskah sumber" data-section="Pilar Pertama: Kuratorial Naskah Sebagai Fondasi Otentisitas"><span class="material-icons-outlined">history_edu</span><span>Kurasi & Anotasi Naskah</span></a></li>
                        <li><a href="#" data-tooltip="Jelajahi struktur data dan hubungan entitas" data-section="Pilar Kedua: Knowledge Graph (Graf Pengetahuan) dan Urgensi Ontologi Solid"><span class="material-icons-outlined">schema</span><span>Ontologi & Knowledge Graph</span></a></li>
                        <li><a href="#" data-tooltip="Lihat bagaimana model AI dilatih dan diselaraskan" data-section="Pilar Ketiga: Fine Tuning (Penyesuaian Khusus) dan RLHF oleh Otoritas Keilmuan"><span class="material-icons-outlined">model_training</span><span>Model AI & Pelatihan (RLHF)</span></a></li>
                        <li><a href="#" data-tooltip="Pelajari tentang penggunaan IPFS dan Blockchain" data-section="Pilar Pertama: Kuratorial Naskah Sebagai Fondasi Otentisitas"><span class="material-icons-outlined">verified_user</span><span>Integritas Data (IPFS & Blockchain)</span></a></li>
                        <li><a href="#" data-tooltip="Pahami perbedaan level akses untuk pengguna" data-section="Pilar Keempat: Sistem Strata User (Pengguna) untuk Penyebaran Informasi Bertanggung Jawab"><span class="material-icons-outlined">group</span><span>Sistem Pengguna Bertingkat</span></a></li>
                    </ul>
                </nav>
            </div>
        </aside>
    </div>

    <div class="modal-overlay" id="essay-modal">
        <div class="modal-container">
            <div class="modal-header">
                <h4 id="modal-title"></h4>
                <button class="modal-close-btn" id="modal-close-btn">
                    <span class="material-icons">close</span>
                </button>
            </div>
            <div class="modal-content" id="modal-content"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- Embedded Essay Content ---
            const essayContent = {
                "Narasi & Visi Proyek": `Seorang santri bertanya tentang hukum cryptocurrency kepada chatbot. Seorang mahasiswa mencari dalil untuk skripsinya dari AI (Kecerdasan Buatan) generatif. Kedua skenario ini bukan lagi angan-angan, melainkan realitas sehari-hari yang tak terhindarkan.\n\nAI sudah masuk ke ranah studi Islam. Pertanyaannya bukan lagi haruskah kita menggunakan AI, melainkan bagaimana memastikan AI yang digunakan tidak menyesatkan.\n\nDi sinilah letak urgensi AL 'ILLM (*Authorized Intelligence - Islamic Large Language Model* atau Model Bahasa Besar Islami Berotoritas). Bukan sekadar membangun AI islami, melainkan merajut sebuah ekosistem kecerdasan buatan yang komprehensif, aman, dan dapat dipertanggungjawabkan.`,
                "Kurasi & Anotasi Naskah": `Fondasi setiap sistem pengetahuan adalah data. Dalam konteks keilmuan Islam, ini berarti naskah-naskah klasik, kitab-kitab, dan dokumen-dokumen otentik yang menjadi rujukan utama. Pilar pertama AL 'ILLM adalah kuratorial naskah yang menempatkan akurasi sebagai prioritas absolut.\n\nKeputusan krusial pertama menyangkut digitalisasi. *OCR* (*Optical Character Recognition* atau pengenalan karakter optik) yang umum digunakan rawan kekeliruan, terutama untuk aksara Arab atau naskah kuno. Pilihan kami adalah mengetik ulang secara manual, yang tampaknya mundur di era otomasi. Namun sesungguhnya, ini adalah strategi yang disengaja untuk mencegah distorsi makna.`,
                "Ontologi & Knowledge Graph": `Pengetahuan Islam bukanlah kumpulan fakta terpisah. Ia adalah jaring kompleks hubungan antar konsep, ulama, karya, dan mazhab. AI yang mengandalkan *keyword matching* (pencocokan kata kunci) akan gagal memahami nuansa ini. *Knowledge graph* (graf pengetahuan) menjadi pilar kedua yang merepresentasikan struktur hubungan-hubungan kompleks tersebut.\n\nTahap paling krusial adalah penyusunan *foundational ontology* (ontologi dasar) yang solid. Cetak biru konseptual ini mendefinisikan entitas dan hubungan dalam keilmuan Islam melalui kolaborasi intensif antara ulama, profesor, filsuf, dan pakar IT.`,
                "Model AI & Pelatihan (RLHF)": `*State-of-the-Art* (*SOTA* atau Kondisi Seni/Terkini) LLM seperti Claude Opus 4 atau Gemini 2.5 Pro menjadi basis AL 'ILLM. Namun model-model ini bersifat umum dan harus di-*fine-tune* (disesuaikan secara khusus) dengan dataset dan *knowledge graph* yang telah dibangun. Ini saja belum cukup.\n\n*Reinforcement Learning from Human Feedback* (RLHF atau Pembelajaran Penguatan dari Umpan Balik Manusia) oleh tim ulama dan akademisi Islam adalah pilar ketiga yang menentukan. RLHF memastikan *alignment* (keselarasan) antara algoritma pemrosesan kueri dengan penyusunan respons yang tepat.`,
                "Integritas Data (IPFS & Blockchain)": `Manuskrip hasil kuratorial disimpan permanen di *IPFS* (*InterPlanetary File System* atau sistem file antarplanet) dengan *blockchain* (rantai blok) untuk manajemen data. Teknologi yang tampak berlebihan ini sesungguhnya krusial untuk integritas data. Ketika ada perbedaan pendapat tentang otentisitas teks klasik, *blockchain* memungkinkan pelacakan setiap perubahan dengan *timestamp* (cap waktu) dan *validator identity* (identitas validator). Ini tentang akuntabilitas intelektual: transparansi terhadap setiap modifikasi dan basis otorisasinya.`,
                "Sistem Pengguna Bertingkat": `Interaksi AI dengan pengguna menjadi pilar keempat dalam arsitektur keamanan. AL 'ILLM mengimplementasikan pembedaan empat strata user: *public* (publik), *registered standard user* (pengguna terdaftar standar), santri/mahasiswa, dan ulama/akademisi. Setiap strata menghasilkan respons berbeda berdasarkan *safety measure* (langkah keamanan) yang disusun tim pakar psikologi dan edukasi Islam.\n\nPendekatan ini mencegah bahaya dari penyebaran informasi yang tidak proporsional.`
            };

            // --- Sidebar & Layout Logic ---
            const sidebarLeft = document.getElementById('sidebar-left');
            const sidebarRight = document.getElementById('sidebar-right');
            const mainContent = document.getElementById('main-content');
            const menuToggleLeft = document.getElementById('menu-toggle-left');
            const menuToggleRight = document.getElementById('menu-toggle-right');
            const appLayout = document.getElementById('app-layout');
            const smallScreenBreakpoint = 992;

            function updateLayout() {
                const isSmallScreen = window.innerWidth < smallScreenBreakpoint;
                mainContent.style.transform = '';
                mainContent.style.marginLeft = '';
                mainContent.style.marginRight = '';
                mainContent.style.width = '';
                appLayout.style.overflowX = '';
                if (isSmallScreen) {
                    if (!sidebarLeft.classList.contains('collapsed')) {
                        mainContent.style.transform = `translateX(var(--sidebar-width))`;
                    } else if (!sidebarRight.classList.contains('collapsed')) {
                        mainContent.style.transform = `translateX(calc(-1 * var(--sidebar-width)))`;
                    }
                    if (sidebarLeft.classList.contains('collapsed') && sidebarRight.classList.contains('collapsed')) {
                        appLayout.style.overflowX = 'hidden';
                    }
                } else {
                    const leftMargin = sidebarLeft.classList.contains('collapsed') ? '0' : 'var(--sidebar-width)';
                    const rightMargin = sidebarRight.classList.contains('collapsed') ? '0' : 'var(--sidebar-width)';
                    let width = '100%';
                    if (!sidebarLeft.classList.contains('collapsed') && !sidebarRight.classList.contains('collapsed')) {
                        width = `calc(100% - (var(--sidebar-width) * 2))`;
                    } else if (!sidebarLeft.classList.contains('collapsed') || !sidebarRight.classList.contains('collapsed')) {
                        width = `calc(100% - var(--sidebar-width))`;
                    }
                    mainContent.style.marginLeft = leftMargin;
                    mainContent.style.marginRight = rightMargin;
                    mainContent.style.width = width;
                }
            }

            function setInitialSidebarState() {
                const isSmallScreen = window.innerWidth < smallScreenBreakpoint;
                if (isSmallScreen) {
                    sidebarLeft.classList.add('collapsed');
                    sidebarRight.classList.add('collapsed');
                } else {
                    sidebarLeft.classList.remove('collapsed');
                    sidebarRight.classList.remove('collapsed');
                }
                updateLayout();
            }

            menuToggleLeft.addEventListener('click', function () {
                const isSmallScreen = window.innerWidth < smallScreenBreakpoint;
                sidebarLeft.classList.toggle('collapsed');
                if (isSmallScreen && !sidebarLeft.classList.contains('collapsed')) {
                    sidebarRight.classList.add('collapsed');
                }
                updateLayout();
            });

            menuToggleRight.addEventListener('click', function () {
                const isSmallScreen = window.innerWidth < smallScreenBreakpoint;
                sidebarRight.classList.toggle('collapsed');
                if (isSmallScreen && !sidebarRight.classList.contains('collapsed')) {
                    sidebarLeft.classList.add('collapsed');
                }
                updateLayout();
            });

            window.addEventListener('resize', () => {
                let timeout;
                clearTimeout(timeout);
                timeout = setTimeout(setInitialSidebarState, 100);
            });

            setInitialSidebarState();

            // --- Modal Logic ---
            const modal = document.getElementById('essay-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalContent = document.getElementById('modal-content');
            const closeModalBtn = document.getElementById('modal-close-btn');
            
            function showModal(title, content) {
                modalTitle.textContent = title;
                let htmlContent = content
                    .replace(/\n\n+/g, '</p><p>')
                    .replace(/\n/g, '<br>')
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/\*(.*?)\*/g, '<em>$1</em>')
                    .replace(/`(.*?)`/g, '<code>$1</code>');
                modalContent.innerHTML = `<p>${htmlContent}</p>`;
                modal.classList.add('visible');
            }

            function hideModal() {
                modal.classList.remove('visible');
            }

            // Handler for sidebar menu links
            const menuLinks = document.querySelectorAll('.main-menu .nav-list a[data-section]');
            menuLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const sectionKey = this.querySelector('span:last-child').textContent;
                    const sectionContent = essayContent[sectionKey] || "Konten tidak ditemukan.";
                    showModal(sectionKey, sectionContent);
                });
            });

            // Handler for source chips (event delegation)
            mainContent.addEventListener('click', function(e) {
                const chip = e.target.closest('.source-chip');
                if (chip) {
                    e.preventDefault();
                    const chipText = chip.textContent.trim();
                    showModal(chipText, ''); // Show only the title for now
                }
            });

            closeModalBtn.addEventListener('click', hideModal);
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    hideModal();
                }
            });
        });
    </script>

</body>
</html>
